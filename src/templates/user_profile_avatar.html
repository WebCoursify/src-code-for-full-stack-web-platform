{% extends 'user_profile_base.html' %}

{% block form %}
	<h1>Upload avatar</h1>
	<hr/>
	<form class="form-horizontal" role="form" id="profile-update-avatar" action="/api/avatar/update"
		method="POST">

	    <div class="form-group">
	        <label for="title" class="col-sm-2 control-label">Select avatar file</label>
	        <div class="col-sm-10">
	            <input type="file"  name="avatar" required>
	        </div>
	    </div>

	    <div class="form-group">
	        <div class="col-sm-offset-2 col-sm-10">
	            <button type="submit" class="btn btn-default">Save</button>
	        </div>
	    </div>
	</form>

{% endblock %}

{% block user_profile_script %}
<script type="text/javascript">
$('#profile-update-avatar').ajaxForm({
	success: function(res){
		if(res.error)
			alert(res.error);
		else{
			alert('Update avatar successfully!')
			window.location.reload();
		}
	},
	error: function(e){
		alert('Internal server error');
		console.log(e);
	},
	dataType: 'json'
});
</script>
{% endblock %}